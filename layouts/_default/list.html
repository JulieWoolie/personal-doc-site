{{define "main"}}
  {{partial "title.html" .}}

  {{$has_content := (strings.ContainsNonSpace .Content)}}
  {{if $has_content}}
  <div>
    {{.Content}}
  </div>
  {{end}}

  <div class="booklist">
    {{if $has_content}}
      <h2>Pages</h2>
      <hr>
    {{end}}

    {{ $pageArr := .Pages.ByWeight}}
    {{ $reversed := .Params.reversedOrder | default false}}

    {{if $reversed}}
      {{ $pageArr = $pageArr.Reverse}}
    {{end}}

    {{range $pageArr}}
      <a class="link-card" href="{{.RelPermalink}}">
        <h3>{{.Title}}</h3>
        {{.Plain | truncate 200}}
      </a>
    {{end}}
  </div>
{{end}}
